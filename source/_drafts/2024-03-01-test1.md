---
title: 前端測試(1) - 為何要寫測試
tags: 測試
categories: 測試
---

### 為何要寫測試?
- 維護、重構時，改動其他部分不小心更動到某個數值，導致結果錯誤。(改A壞B的情況)
因此如果有寫測試，就可以安心的改動，因為只要有錯就會顯示。
- 維護、進行敏捷開發過程中，產品不斷迭代，可以透過寫測試增加開發速度，因為發開完團隊、自己都需要花時間測試。
- 重構: 隨著專案的進展，程式越來越複雜，程式如果越來越爛，開發也會越來越慢，導致更多 bug
- 減少維護成本: 很多公司耗用大量人力、金錢進行網站維護

<!--more-->
### 不建議寫測試的狀況
需求不確定、價值性不高的網站，不太需要。
- 專案初期需求不明確: 需求尚未明朗又必須有成果時，只要需求改變測試跟著改寫，開發成本會變得很高，拉長交付時間。
- 價值性不高的網站: 取決於經營者的價值設定，寫測試需要時間，時間就是金錢，老闆給多少時間、人力開發，老闆感受不到價值自然不會投入自動化測試。
如果老闆為了確認網站是否可以用，請個人把所有頁面全部使用一遍(E2E Test) ，這是他唯一能理解的價值呈現方式。


### 測試種類
大部分公司沒有測試工程師，思考實際上想要測什麼，不同測試類型需要保護的面向不太相同。
測試主要是針對功能，有時候也會遇到 Unit Text、Integration Test 都過了，但是使用者不滿意，這就是需求對到功能的規畫問題，寫測試前最好程式都比較穩定不會一直翻掉、修改功能在撰寫比較適合。

#### 單元測試 Unit Text
針對程式最小單位進行測試。ex:funtion。

想確保細部的商業邏輯正確適合使用。
通常由開發人員自行撰寫，不用另外設立環境。
成本比較低，測 funtion 尤其是整理資料區塊，有時候比較難切出單一 funciton，就只能跑 E2E 確定頁面都可以載入、一般的操作都不會出錯。
有些公司會為了申請 ISO 要達到一定的覆蓋率 就會寫比較多測試。
-有寫 Unit Text 可以提前發現錯誤，避免問題到使用者才發現的方法
-程式架構好(SOLID)也會比較容易寫，應該也是測試中比例最高的，開發成本比較低

使用工具: Jest

#### 整合測試 Integration Test
確保模組與模組之間的互動行為，介於單元測試與端對端測試之間，有時候單一模組獨立運作正常，但是與其他模組互動時可能發生錯誤，這就是整合測試的主要負責領域。
需要準備完整的模擬環境來測試，針對幾個住要的模組進行。

#### 端對端測試 End-to-End Test
使用者的角度出發(一端)，對真實系統(另一端)進行測試，模擬真實使用者測試整個專案的功能和流程。
很多公司使用人工測試，或是 QA Team 進行的內容。
ex: 登入、註冊...。

撰寫 E2E 成本比較高較花時間: 跑的比較久（可能10分鐘以上）。
考慮成本: 如果花一個禮拜寫 E2E（40小時），每次跑10分鐘，跟目前一個禮拜手動測試一次10分鐘，可能要兩三個月後才會回本，可以衡量值不值得投資。

驗證系統是否符合客戶的實際需求，透過寫 E2E 自動化測試可以增加測試的效率。

需要準備完整個系統環境 EX:Docker。
這部分可以反映使用者需求是否滿足，商業價值較高，結果反映使用者需求驗證成功。
對一個穩定的產品或需要長時間維護的專案，自動化的端對端測試長期成本大於人工測試成本。

使用工具: Cypress(這個難測拖拉的狀況)、Playwright、Selenium(比較老牌.穩，但是一開始安裝流程比較多)

- 思考需要寫 E2E 嗎: 網站是否有「重要的功能、穩定的需求」需要被保護？

### 寫測試的時機:
目標:保護程式
因此不是所有元件都需要寫測試，首先需要評估這段程式的重要性
ex: 必須很強迫限制參數類型，不能有誤傳的狀況

因為寫測試也是需要時間來開發，但如果花1.5~2倍的時間開發，未來長期下來可以減少不只2倍

### 如何選測試框架
1. 初期學習成本低
2. 挑選網站中重要、需要保護的功能。
   或是人工測試中錯誤的項目增加測試功能，保證日後不會再出現相同問題，減少回測時間。
3. 確認專案需要測試的地方，框架有支援到。
4. 如果可以結合 CI/CD 定時自動跑流程，所有測試在 CI 中執行，問題發生寄信通知開發者，可以即時了解、修正。

https://ithelp.ithome.com.tw/articles/10276404
https://blog.miniasp.com/post/2019/02/18/Unit-testing-Integration-testing-e2e-testing