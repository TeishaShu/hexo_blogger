---
title: React 組  件3大屬性：state、props、refs
tags: 
- JavaScript
- React
categories:
- JavaScript
- React
---
*useState  中的 state 指的是保存在 React 元件內部的資料狀態
useEffect 中的 effect 指的是 副作用（side-effect簡稱為 effect） 的意思

### state
state 狀態在 react 中不能直接更改，需要使用 setState 
```
// 很標準但是沒人會在開發時這樣寫，解釋念用
class Demo extends React.Component{
  constructor(props){
    this.state = {isWright:false}
  }
  changeWright(){
    // 抓原來的值
    const isWright = this.state.isWright

    // 不能直接更改 state
    // this.state.isWright = !isWright

    // 只用父層 React.Component 的屬性
    this.setState({isWright : !isWright})

  }
  render(){
    const {isWright} = this.state
    return(<p onClick={this.changeWright}>今天我想寫一首詩，{isWright ? '超有靈感寫了2篇了!' : '可是沒有靈感、頭緒><'}</p>)
  }
}
```

以前寫的方式
```
class Demo extends React.Component{
  // 初始化
  state = {isWright:false}

  changeWright = ()=>{
    const isWright = this.state.isWright
    this.setState({isWright : !isWright})
  }

  render(){
    const {isWright} = this.state
    return(<p onClick={this.changeWright}>今天我想寫一首詩，{isWright ? '超有靈感寫了2篇了!' : '可是沒有靈感、頭緒><'}</p>)
  }
}
```

### props
把外部資料傳入組件內讀取
```
class Demo extends React.Component{
  render(){
    const {name, age} = this.props;  //這邊接值
    // this.props.name = ''; // 不能這樣寫，因為 props 只能讀不能改
    return(<p>我的名字叫{name}，今年{age}歲</p>)
  }
}

ReactDOM.render(<Demo name="AA" age="5"/>, document.getElementById('test1')) // 從這邊傳入
```

屬性很多時，可以用物件的方式搭配展開運算符傳入
但是要注意物件內的 key 跟 props 定義的名稱要一樣。
注意:這種方始只在 babel、react 中才能用
```
class Demo extends React.Component{
  render(){
    const {name, age} = this.props; //與下面物件對應
    return(<p>我的名字叫{name}，今年{age}歲</p>)
  }
}

//太多屬性時可以用展開運算符放
const obj = {name:'AA', age:'5'}
ReactDOM.render(<Demo {...obj}/>, document.getElementById('test1')) // 從這邊傳入
```

#### 設定屬性規則
propTypes => 制定規則，defaultProps => 預設。
```
class Demo extends React.Component{
  render(){
    const {name, age} = this.props; 
    return(<p>我的名字叫{name}，今年{age}歲</p>)
  }
}

//制定規則
Demo.propTypes = {//小寫 propTypes
  name: PropTypes.string,  //大寫 PropTypes
  age: PropTypes.string.isRequired, //必填
  speak: PropTypes.func, //函式寫法
}

//預設
Demo.defaultProps = {
  name:'無名氏'
}

const speakSom = () => {
  console.log('說說話吧')
}

//寫法一
const obj = {name:'AA', age:'5'}
ReactDOM.render(<Demo {...obj}/>, document.getElementById('test1'))
//寫法二 
ReactDOM.render(<Demo name='AA' age='10' speak={speakSom}/>, document.getElementById('test1')) 
```








